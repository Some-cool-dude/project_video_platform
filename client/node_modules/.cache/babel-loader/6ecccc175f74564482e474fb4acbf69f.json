{"ast":null,"code":"import _classCallCheck from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import axios from'axios';import'./css/login.css';var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);function Login(props){var _this;_classCallCheck(this,Login);_this=_possibleConstructorReturn(this,_getPrototypeOf(Login).call(this,props));_this.state={error:false,message:''};_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.username=React.createRef();_this.password=React.createRef();return _this;}_createClass(Login,[{key:\"handleSubmit\",value:function handleSubmit(event){var _this2=this;event.preventDefault();if(this.username.current.value===''){this.setState({error:true,message:\"please fill username\"});event.target.reset();}else if(this.password.current.value===''){this.setState({error:true,message:\"please fill password\"});event.target.reset();}else{event.persist();axios.post('/api/v1/login',{username:this.username.current.value,password:this.password.current.value}).then(function(res){localStorage.setItem('jwt',res.data.token);_this2.props.eventEmitter.emit(\"auth\",res.data.token);_this2.props.history.push('/');}).catch(function(err){if(err.response){if(err.response.data.message){_this2.setState({error:true,message:err.response.data.message});event.target.reset();}}console.error(err.message);});}}},{key:\"componentDidMount\",value:function componentDidMount(){var nav=document.getElementById('nav');var footer=document.getElementById('footer');nav.style.display=\"none\";footer.style.display=\"none\";}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){var nav=document.getElementById('nav');var footer=document.getElementById('footer');nav.style.display=\"block\";footer.style.display=\"block\";}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"Login\"},React.createElement(\"form\",{action:\"/api/v1/login\",method:\"POST\",id:\"form\",onSubmit:this.handleSubmit},React.createElement(\"div\",{className:\"container\"},React.createElement(\"h1\",null,\"Log in\"),React.createElement(\"hr\",null),this.state.error&&React.createElement(\"div\",{className:\"alert alert-danger\",id:\"alert\"},this.state.message),React.createElement(\"label\",{htmlFor:\"username\"},React.createElement(\"b\",null,\"Username\")),React.createElement(\"input\",{type:\"text\",placeholder:\"Enter username\",name:\"username\",maxLength:\"50\",ref:this.username,required:true}),React.createElement(\"label\",{htmlFor:\"psw\"},React.createElement(\"b\",null,\"Password\")),React.createElement(\"input\",{type:\"password\",placeholder:\"Enter Password\",name:\"password\",maxLength:\"50\",ref:this.password,required:true}),React.createElement(\"hr\",null),React.createElement(\"button\",{type:\"submit\",className:\"loginbtsn\"},\"Log in\"))));}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"sources":["/home/andrew/webprogbase2/client/src/Login.js"],"names":["React","axios","Login","props","state","error","message","handleSubmit","bind","username","createRef","password","event","preventDefault","current","value","setState","target","reset","persist","post","then","res","localStorage","setItem","data","token","eventEmitter","emit","history","push","catch","err","response","console","nav","document","getElementById","footer","style","display","Component"],"mappings":"w6BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,iBAAP,C,GAEMC,CAAAA,K,2EACF,eAAYC,KAAZ,CAAmB,uCACf,uEAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,CACTC,KAAK,CAAE,KADE,CAETC,OAAO,CAAE,EAFA,CAAb,CAIA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB,CACA,MAAKC,QAAL,CAAgBT,KAAK,CAACU,SAAN,EAAhB,CACA,MAAKC,QAAL,CAAgBX,KAAK,CAACU,SAAN,EAAhB,CARe,aASlB,C,oEAEYE,K,CAAO,iBAChBA,KAAK,CAACC,cAAN,GACA,GAAG,KAAKJ,QAAL,CAAcK,OAAd,CAAsBC,KAAtB,GAAgC,EAAnC,CAAuC,CACnC,KAAKC,QAAL,CAAc,CAACX,KAAK,CAAE,IAAR,CAAcC,OAAO,CAAE,sBAAvB,CAAd,EACAM,KAAK,CAACK,MAAN,CAAaC,KAAb,GACH,CAHD,IAIK,IAAG,KAAKP,QAAL,CAAcG,OAAd,CAAsBC,KAAtB,GAAgC,EAAnC,CAAuC,CACxC,KAAKC,QAAL,CAAc,CAACX,KAAK,CAAE,IAAR,CAAcC,OAAO,CAAE,sBAAvB,CAAd,EACAM,KAAK,CAACK,MAAN,CAAaC,KAAb,GACH,CAHI,IAIA,CACHN,KAAK,CAACO,OAAN,GACElB,KAAK,CAACmB,IAAN,CAAW,eAAX,CAA4B,CAACX,QAAQ,CAAE,KAAKA,QAAL,CAAcK,OAAd,CAAsBC,KAAjC,CAAwCJ,QAAQ,CAAE,KAAKA,QAAL,CAAcG,OAAd,CAAsBC,KAAxE,CAA5B,EACCM,IADD,CACM,SAAAC,GAAG,CAAI,CACXC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAA4BF,GAAG,CAACG,IAAJ,CAASC,KAArC,EACA,MAAI,CAACvB,KAAL,CAAWwB,YAAX,CAAwBC,IAAxB,CAA6B,MAA7B,CAAqCN,GAAG,CAACG,IAAJ,CAASC,KAA9C,EACA,MAAI,CAACvB,KAAL,CAAW0B,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,EACD,CALD,EAMCC,KAND,CAMO,SAAAC,GAAG,CAAI,CACZ,GAAGA,GAAG,CAACC,QAAP,CAAiB,CACf,GAAGD,GAAG,CAACC,QAAJ,CAAaR,IAAb,CAAkBnB,OAArB,CAA8B,CAC5B,MAAI,CAACU,QAAL,CAAc,CAACX,KAAK,CAAE,IAAR,CAAcC,OAAO,CAAE0B,GAAG,CAACC,QAAJ,CAAaR,IAAb,CAAkBnB,OAAzC,CAAd,EACAM,KAAK,CAACK,MAAN,CAAaC,KAAb,GACD,CACF,CACDgB,OAAO,CAAC7B,KAAR,CAAc2B,GAAG,CAAC1B,OAAlB,EACD,CAdD,EAeH,CACJ,C,6DAEmB,CAClB,GAAI6B,CAAAA,GAAG,CAAGC,QAAQ,CAACC,cAAT,CAAwB,KAAxB,CAAV,CACA,GAAIC,CAAAA,MAAM,CAAGF,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAb,CACAF,GAAG,CAACI,KAAJ,CAAUC,OAAV,CAAoB,MAApB,CACAF,MAAM,CAACC,KAAP,CAAaC,OAAb,CAAuB,MAAvB,CACD,C,mEAEsB,CACrB,GAAIL,CAAAA,GAAG,CAAGC,QAAQ,CAACC,cAAT,CAAwB,KAAxB,CAAV,CACA,GAAIC,CAAAA,MAAM,CAAGF,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAb,CACAF,GAAG,CAACI,KAAJ,CAAUC,OAAV,CAAoB,OAApB,CACAF,MAAM,CAACC,KAAP,CAAaC,OAAb,CAAuB,OAAvB,CACD,C,uCAEM,CACP,MACE,4BAAK,SAAS,CAAC,OAAf,EACE,4BAAM,MAAM,CAAC,eAAb,CAA6B,MAAM,CAAC,MAApC,CAA2C,EAAE,CAAC,MAA9C,CAAqD,QAAQ,CAAE,KAAKjC,YAApE,EACA,2BAAK,SAAS,CAAC,WAAf,EACE,uCADF,CAEE,8BAFF,CAGG,KAAKH,KAAL,CAAWC,KAAX,EACC,2BAAK,SAAS,CAAC,oBAAf,CAAoC,EAAE,CAAC,OAAvC,EAAgD,KAAKD,KAAL,CAAWE,OAA3D,CAJJ,CAME,6BAAO,OAAO,CAAC,UAAf,EAA0B,wCAA1B,CANF,CAOE,6BAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,gBAA/B,CAAgD,IAAI,CAAC,UAArD,CAAgE,SAAS,CAAC,IAA1E,CAA+E,GAAG,CAAE,KAAKG,QAAzF,CAAmG,QAAQ,KAA3G,EAPF,CASE,6BAAO,OAAO,CAAC,KAAf,EAAqB,wCAArB,CATF,CAUE,6BAAO,IAAI,CAAC,UAAZ,CAAuB,WAAW,CAAC,gBAAnC,CAAoD,IAAI,CAAC,UAAzD,CAAoE,SAAS,CAAC,IAA9E,CAAmF,GAAG,CAAE,KAAKE,QAA7F,CAAuG,QAAQ,KAA/G,EAVF,CAYE,8BAZF,CAaE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,WAAhC,WAbF,CADA,CADF,CADF,CAqBD,C,mBA9EiBX,KAAK,CAACyC,S,EAiF1B,cAAevC,CAAAA,KAAf","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport './css/login.css'\n\nclass Login extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: false,\n            message: ''\n        }\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.username = React.createRef();\n        this.password = React.createRef();\n    }\n\n    handleSubmit(event) {\n        event.preventDefault();\n        if(this.username.current.value === '') {\n            this.setState({error: true, message: \"please fill username\"});\n            event.target.reset();\n        }\n        else if(this.password.current.value === '') {\n            this.setState({error: true, message: \"please fill password\"});\n            event.target.reset();\n        }\n        else {\n          event.persist();\n            axios.post('/api/v1/login', {username: this.username.current.value, password: this.password.current.value})\n            .then(res => {\n              localStorage.setItem('jwt', res.data.token);\n              this.props.eventEmitter.emit(\"auth\", res.data.token);\n              this.props.history.push('/');\n            })\n            .catch(err => {\n              if(err.response) {\n                if(err.response.data.message) {\n                  this.setState({error: true, message: err.response.data.message});\n                  event.target.reset();\n                }\n              }\n              console.error(err.message);\n            });\n        }\n    }\n\n    componentDidMount() {\n      let nav = document.getElementById('nav');\n      let footer = document.getElementById('footer');\n      nav.style.display = \"none\";\n      footer.style.display = \"none\";\n    }\n\n    componentWillUnmount() {\n      let nav = document.getElementById('nav');\n      let footer = document.getElementById('footer');\n      nav.style.display = \"block\";\n      footer.style.display = \"block\";\n    }\n\n  render() {\n    return (\n      <div className=\"Login\">\n        <form action=\"/api/v1/login\" method=\"POST\" id=\"form\" onSubmit={this.handleSubmit}>\n        <div className=\"container\">\n          <h1>Log in</h1>\n          <hr />\n          {this.state.error && \n            <div className=\"alert alert-danger\" id=\"alert\">{this.state.message}</div>\n          }\n          <label htmlFor=\"username\"><b>Username</b></label>\n          <input type=\"text\" placeholder=\"Enter username\" name=\"username\" maxLength=\"50\" ref={this.username} required />\n      \n          <label htmlFor=\"psw\"><b>Password</b></label>\n          <input type=\"password\" placeholder=\"Enter Password\" name=\"password\" maxLength=\"50\" ref={this.password} required />\n      \n          <hr />\n          <button type=\"submit\" className=\"loginbtsn\">Log in</button>\n        </div>\n      </form>\n      </div>\n    );\n  }\n}\n\nexport default Login"]},"metadata":{},"sourceType":"module"}