{"ast":null,"code":"import _classCallCheck from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import axios from'axios';import'./css/video.css';var Video=/*#__PURE__*/function(_React$Component){_inherits(Video,_React$Component);function Video(props){var _this;_classCallCheck(this,Video);_this=_possibleConstructorReturn(this,_getPrototypeOf(Video).call(this,props));_this.owner='';_this.state={data:null,update:false,delete:false};_this.handleUpdate=_this.handleUpdate.bind(_assertThisInitialized(_this));_this.handleDelete=_this.handleDelete.bind(_assertThisInitialized(_this));_this.title=React.createRef();_this.quality=React.createRef();_this.size=React.createRef();return _this;}_createClass(Video,[{key:\"handleDelete\",value:function handleDelete(e){e.preventDefault();axios.delete('/api/v1/videos/'+this.state.data._id,{headers:{Authorization:\"Bearer \".concat(this.props.auth)}}).then(this.props.history.push('/videos')).catch(console.error);}},{key:\"handleUpdate\",value:function handleUpdate(e){var _this2=this;e.preventDefault();this.setState({update:false});axios.put('/api/v1/videos/'+this.state.data._id,{title:this.title.current.value,size:this.size.current.value,quality:this.quality.current.value},{headers:{Authorization:\"Bearer \".concat(this.props.auth)}}).then(function(res){_this2.setState({data:res.data});}).catch(console.error);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;if(!this.state.data){if(this.props.auth){axios.get('/api/v1/me',{headers:{Authorization:\"Bearer \".concat(this.props.auth)}}).then(function(res){_this3.owner=res.data._id;}).catch(console.error);}axios.get('/api/v1/videos/'+this.props.match.params.id).then(function(res){_this3.setState({data:res.data});}).catch(console.error);}}},{key:\"render\",value:function render(){var _this4=this;if(!this.state.data)return null;var check=this.state.data.user_id===this.owner;return React.createElement(\"div\",{className:\"Video\"},React.createElement(\"div\",{className:\"content\"},React.createElement(\"video\",{width:\"853\",height:\"480\",poster:this.state.data.poster,controls:true},React.createElement(\"source\",{src:this.state.data.urlPath,type:\"video/\"+this.state.data.format}),\"Your browser does not support the video tag.\"),React.createElement(\"p\",null,React.createElement(\"b\",null,\"Format:\"),this.state.data.format),React.createElement(\"p\",null,React.createElement(\"b\",null,\"Quality:\"),this.state.data.quality),React.createElement(\"p\",null,React.createElement(\"b\",null,\"Size:\"),this.state.data.size),React.createElement(\"p\",null,React.createElement(\"b\",null,\"Added:\"),React.createElement(\"i\",null,this.state.data.addedAt)),this.state.update&&React.createElement(\"div\",{id:\"update\",className:\"modal\"},React.createElement(\"form\",{className:\"modal-content animate\",onSubmit:this.handleUpdate,action:\"\",method:\"post\"},React.createElement(\"span\",{onClick:function onClick(){return _this4.setState({update:false});},className:\"close\",title:\"Close Modal\"},\"\\xD7\"),React.createElement(\"div\",{className:\"container\"},React.createElement(\"label\",{htmlFor:\"title\"},React.createElement(\"b\",null,\"Title\")),React.createElement(\"input\",{type:\"text\",placeholder:\"Enter title\",name:\"title\",defaultValue:this.state.data.title,ref:this.title,maxLength:\"50\"}),React.createElement(\"label\",{htmlFor:\"size\"},React.createElement(\"b\",null,\"Size\")),React.createElement(\"input\",{type:\"number\",min:\"0\",defaultValue:this.state.data.size,ref:this.size,name:\"size\"}),React.createElement(\"label\",{htmlFor:\"quality\"},React.createElement(\"b\",null,\"Quality\")),React.createElement(\"input\",{type:\"number\",min:\"0\",defaultValue:this.state.data.quality,ref:this.quality,name:\"quality\"}),React.createElement(\"button\",{type:\"submit\",className:\"submit\"},\"Update\"),React.createElement(\"button\",{type:\"button\",onClick:function onClick(){return _this4.setState({update:false});},className:\"cancelbtn\"},\"Cancel\")))),this.state.delete&&React.createElement(\"div\",{id:\"delete\",className:\"modal\"},React.createElement(\"form\",{className:\"modal-content animate\",onSubmit:this.handleDelete,action:\"\",method:\"post\"},React.createElement(\"span\",{onClick:function onClick(){return _this4.setState({delete:false});},className:\"close\",title:\"Close Modal\"},\"\\xD7\"),React.createElement(\"div\",{className:\"container\"},React.createElement(\"img\",{src:\"../images/alert.png\",alt:\"alert\"}),React.createElement(\"h2\",null,\"Are you sure you wanna delete this video?\"),React.createElement(\"button\",{type:\"submit\",className:\"submit\"},\"Delete\"),React.createElement(\"button\",{type:\"button\",onClick:function onClick(){return _this4.setState({delete:false});},className:\"cancelbtn\"},\"Cancel\")))),check&&React.createElement(\"span\",null,React.createElement(\"button\",{onClick:function onClick(){return _this4.setState({update:true});},style:{width:\"auto\"}},React.createElement(\"i\",{className:\"fas fa-video\"}),\" Update\"),React.createElement(\"button\",{onClick:function onClick(){return _this4.setState({delete:true});},style:{width:\"auto\"}},React.createElement(\"i\",{className:\"fas fa-trash\"}),\" Delete\"))));}}]);return Video;}(React.Component);export default Video;","map":{"version":3,"sources":["/home/andrew/webprogbase2/client/src/Video.js"],"names":["React","axios","Video","props","owner","state","data","update","delete","handleUpdate","bind","handleDelete","title","createRef","quality","size","e","preventDefault","_id","headers","Authorization","auth","then","history","push","catch","console","error","setState","put","current","value","res","get","match","params","id","check","user_id","poster","urlPath","format","addedAt","width","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios';\nimport './css/video.css'\n\nclass Video extends React.Component {\n    owner = ''\n  constructor(props) {\n    super(props);\n    this.state = {\n        data: null,\n        update: false,\n        delete: false\n    }\n    this.handleUpdate = this.handleUpdate.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.title = React.createRef()\n    this.quality = React.createRef();\n    this.size = React.createRef();\n  }\n\n  handleDelete(e) {\n      e.preventDefault();\n      axios.delete('/api/v1/videos/' + this.state.data._id, {headers:{Authorization: `Bearer ${this.props.auth}`}})\n      .then(this.props.history.push('/videos'))\n      .catch(console.error)\n  }\n\n  handleUpdate(e) {\n      e.preventDefault();\n        this.setState({update: false})\n      axios.put('/api/v1/videos/' + this.state.data._id,{title: this.title.current.value, size: this.size.current.value, quality: this.quality.current.value}, {headers:{Authorization: `Bearer ${this.props.auth}`}})\n      .then(res => {\n          this.setState({data: res.data});\n      })\n      .catch(console.error)\n  }\n\n  componentDidMount() {\n    if(!this.state.data) {\n        if(this.props.auth) {\n            axios.get('/api/v1/me', {headers:{Authorization: `Bearer ${this.props.auth}`}})\n            .then(res => {\n                this.owner = res.data._id;\n            })\n            .catch(console.error);\n        }\n        axios.get('/api/v1/videos/' + this.props.match.params.id)\n        .then(res => {\n            this.setState({data: res.data});\n        })\n        .catch(console.error);\n    }\n  }\n\n  render() {\n    if(!this.state.data) return null;\n    const check = this.state.data.user_id === this.owner;\n    return (\n        <div className=\"Video\">\n            <div className=\"content\">\n                <video width=\"853\" height=\"480\" poster={this.state.data.poster} controls>\n                    <source src={this.state.data.urlPath} type={\"video/\" + this.state.data.format}/>\n                    Your browser does not support the video tag.\n                </video>\n                <p><b>Format:</b>{this.state.data.format}</p>\n                <p><b>Quality:</b>{this.state.data.quality}</p>\n                <p><b>Size:</b>{this.state.data.size}</p>\n                <p><b>Added:</b><i>{this.state.data.addedAt}</i></p>\n                {this.state.update &&\n                <div id=\"update\" className=\"modal\">\n                <form className=\"modal-content animate\" onSubmit={this.handleUpdate} action=\"\" method=\"post\">\n    \n                    <span onClick={() => this.setState({update: false})} className=\"close\" title=\"Close Modal\">&times;</span>\n    \n                    <div className=\"container\">\n                    <label htmlFor=\"title\"><b>Title</b></label>\n                    <input type=\"text\" placeholder=\"Enter title\" name=\"title\" defaultValue={this.state.data.title} ref={this.title} maxLength=\"50\" />\n    \n                    <label htmlFor=\"size\"><b>Size</b></label>\n                    <input type=\"number\" min=\"0\" defaultValue={this.state.data.size} ref={this.size} name=\"size\" />\n    \n                    <label htmlFor=\"quality\"><b>Quality</b></label>\n                    <input type=\"number\" min=\"0\" defaultValue={this.state.data.quality} ref={this.quality} name=\"quality\" />\n                        \n                    <button type=\"submit\" className=\"submit\">Update</button>\n                    <button type=\"button\" onClick={() => this.setState({update: false})} className=\"cancelbtn\">Cancel</button>\n                    </div>\n    \n                </form>\n                </div>\n            }\n            {this.state.delete &&\n                <div id=\"delete\" className=\"modal\">\n                <form className=\"modal-content animate\" onSubmit={this.handleDelete} action=\"\" method=\"post\">\n    \n                    <span onClick={() => this.setState({delete: false})} className=\"close\" title=\"Close Modal\">&times;</span>\n                    <div className=\"container\">\n                            <img src=\"../images/alert.png\" alt=\"alert\" />\n                            <h2>Are you sure you wanna delete this video?</h2>\n                            <button type=\"submit\" className=\"submit\">Delete</button>\n                            <button type=\"button\" onClick={() => this.setState({delete: false})} className=\"cancelbtn\">Cancel</button>\n                    </div>\n                </form>\n                </div>\n            }\n            {check &&\n                <span>\n                    <button onClick={() => this.setState({update: true})} style={{width: \"auto\"}}><i className=\"fas fa-video\"></i> Update</button>\n                    <button onClick={() => this.setState({delete: true})} style={{width: \"auto\"}}><i className=\"fas fa-trash\"></i> Delete</button>\n                </span>\n            }\n            </div>\n        </div>\n    );\n  }\n}\n\nexport default Video"]},"metadata":{},"sourceType":"module"}