{"ast":null,"code":"import _classCallCheck from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import axios from\"axios\";import{NavLink,withRouter}from\"react-router-dom\";var Header=/*#__PURE__*/function(_React$Component){_inherits(Header,_React$Component);function Header(props){var _this;_classCallCheck(this,Header);_this=_possibleConstructorReturn(this,_getPrototypeOf(Header).call(this,props));_this.state={data:null,auth:_this.props.auth};_this.handleClick=_this.handleClick.bind(_assertThisInitialized(_this));return _this;}_createClass(Header,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(this.state.auth&&!this.state.data){var jwt=localStorage.getItem('jwt');axios.get(\"/api/v1/me\",{headers:{Authorization:\"Bearer \".concat(jwt)}}).then(function(res){_this2.setState({data:res.data});}).catch(console.error);}}},{key:\"handleClick\",value:function handleClick(event){event.preventDefault();localStorage.removeItem('jwt');this.setState({data:null});this.props.eventEmitter.emit(\"auth\",null);this.props.history.push('/');}},{key:\"render\",value:function render(){return React.createElement(\"nav\",{id:\"nav\"},React.createElement(NavLink,{activeClassName:\"active\",to:\"/about\"},\"About\"),React.createElement(NavLink,{activeClassName:\"active\",to:\"/videos\"},\"Videos\"),React.createElement(NavLink,{activeClassName:\"active\",to:\"/channels\"},\"Channels\"),React.createElement(NavLink,{exact:true,activeClassName:\"active\",to:\"/\"},\"Home\"),this.state.auth&&this.state.data?React.createElement(\"span\",null,this.state.data.role&&React.createElement(NavLink,{activeClassName:\"active\",to:\"/users\"},\"Users\"),React.createElement(NavLink,{activeClassName:\"active\",onClick:this.handleClick,to:\"/logout\"},\"Logout\"),React.createElement(\"div\",{className:\"user\"},React.createElement(\"img\",{src:this.state.data.avaUrl,alt:\"User\"}),React.createElement(NavLink,{activeClassName:\"active\",to:\"/profile\"},this.state.data.login))):React.createElement(\"span\",null,React.createElement(NavLink,{activeClassName:\"active\",to:\"/login\"},\"Login\"),React.createElement(NavLink,{activeClassName:\"active\",to:\"/register\"},\"Signin\")),React.createElement(\"img\",{src:\"https://res.cloudinary.com/hlrzutjus/image/upload/v1576349810/logo_anwozf.png\",alt:\"Logo\"}),React.createElement(\"i\",null,\"AndrewsBestsite\"));}}]);return Header;}(React.Component);export default withRouter(Header);","map":{"version":3,"sources":["/home/andrew/webprogbase2/client/src/Header.js"],"names":["React","axios","NavLink","withRouter","Header","props","state","data","auth","handleClick","bind","jwt","localStorage","getItem","get","headers","Authorization","then","res","setState","catch","console","error","event","preventDefault","removeItem","eventEmitter","emit","history","push","role","avaUrl","login","Component"],"mappings":"w6BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,CAAkBC,UAAlB,KAAoC,kBAApC,C,GAEMC,CAAAA,M,4EACJ,gBAAYC,KAAZ,CAAmB,wCACjB,wEAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,CACXC,IAAI,CAAE,IADK,CAEXC,IAAI,CAAE,MAAKH,KAAL,CAAWG,IAFN,CAAb,CAIA,MAAKC,WAAL,CAAmB,MAAKA,WAAL,CAAiBC,IAAjB,+BAAnB,CANiB,aAOlB,C,gFAEiB,iBAClB,GAAI,KAAKJ,KAAL,CAAWE,IAAX,EAAmB,CAAC,KAAKF,KAAL,CAAWC,IAAnC,CAAyC,CACvC,GAAMI,CAAAA,GAAG,CAAGC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAZ,CACAZ,KAAK,CAACa,GAAN,CAAU,YAAV,CAAwB,CAACC,OAAO,CAAE,CAACC,aAAa,kBAAYL,GAAZ,CAAd,CAAV,CAAxB,EACCM,IADD,CACM,SAAAC,GAAG,CAAI,CACX,MAAI,CAACC,QAAL,CAAc,CAACZ,IAAI,CAAEW,GAAG,CAACX,IAAX,CAAd,EACD,CAHD,EAICa,KAJD,CAIOC,OAAO,CAACC,KAJf,EAKD,CACF,C,gDAEWC,K,CAAO,CACjBA,KAAK,CAACC,cAAN,GACAZ,YAAY,CAACa,UAAb,CAAwB,KAAxB,EACA,KAAKN,QAAL,CAAc,CAACZ,IAAI,CAAE,IAAP,CAAd,EACA,KAAKF,KAAL,CAAWqB,YAAX,CAAwBC,IAAxB,CAA6B,MAA7B,CAAqC,IAArC,EACA,KAAKtB,KAAL,CAAWuB,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,EACD,C,uCAEU,CACP,MACE,4BAAK,EAAE,CAAC,KAAR,EACE,oBAAC,OAAD,EAAS,eAAe,CAAC,QAAzB,CAAkC,EAAE,CAAC,QAArC,UADF,CAGE,oBAAC,OAAD,EAAS,eAAe,CAAC,QAAzB,CAAkC,EAAE,CAAC,SAArC,WAHF,CAKE,oBAAC,OAAD,EAAS,eAAe,CAAC,QAAzB,CAAkC,EAAE,CAAC,WAArC,aALF,CAOE,oBAAC,OAAD,EAAS,KAAK,KAAd,CAAe,eAAe,CAAC,QAA/B,CAAwC,EAAE,CAAC,GAA3C,SAPF,CASG,KAAKvB,KAAL,CAAWE,IAAX,EAAmB,KAAKF,KAAL,CAAWC,IAA9B,CACE,gCACG,KAAKD,KAAL,CAAWC,IAAX,CAAgBuB,IAAhB,EACE,oBAAC,OAAD,EAAS,eAAe,CAAC,QAAzB,CAAkC,EAAE,CAAC,QAArC,UAFL,CAKA,oBAAC,OAAD,EAAS,eAAe,CAAC,QAAzB,CAAkC,OAAO,CAAE,KAAKrB,WAAhD,CAA6D,EAAE,CAAC,SAAhE,WALA,CAOG,2BAAK,SAAS,CAAC,MAAf,EACE,2BAAK,GAAG,CAAE,KAAKH,KAAL,CAAWC,IAAX,CAAgBwB,MAA1B,CAAkC,GAAG,CAAC,MAAtC,EADF,CAEE,oBAAC,OAAD,EAAS,eAAe,CAAC,QAAzB,CAAkC,EAAE,CAAC,UAArC,EAAiD,KAAKzB,KAAL,CAAWC,IAAX,CAAgByB,KAAjE,CAFF,CAPH,CADF,CAeC,gCACE,oBAAC,OAAD,EAAS,eAAe,CAAC,QAAzB,CAAkC,EAAE,CAAC,QAArC,UADF,CAGI,oBAAC,OAAD,EAAS,eAAe,CAAC,QAAzB,CAAkC,EAAE,CAAC,WAArC,WAHJ,CAxBJ,CA+BE,2BAAK,GAAG,CAAC,+EAAT,CAAyF,GAAG,CAAC,MAA7F,EA/BF,CAgCE,+CAhCF,CADF,CAoCD,C,oBAlEkBhC,KAAK,CAACiC,S,EAoE3B,cAAe9B,CAAAA,UAAU,CAACC,MAAD,CAAzB","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport { NavLink, withRouter } from \"react-router-dom\";\n\nclass Header extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: null,\n      auth: this.props.auth\n    }\n    this.handleClick = this.handleClick.bind(this);\n  }\n\ncomponentDidMount() {\n  if (this.state.auth && !this.state.data) {\n    const jwt = localStorage.getItem('jwt');\n    axios.get(\"/api/v1/me\", {headers: {Authorization: `Bearer ${jwt}`}})\n    .then(res => {\n      this.setState({data: res.data});\n    })\n    .catch(console.error);\n  }\n}\n\nhandleClick(event) {\n  event.preventDefault();\n  localStorage.removeItem('jwt');\n  this.setState({data: null});\n  this.props.eventEmitter.emit(\"auth\", null);\n  this.props.history.push('/');\n}\n\n  render() {\n    return (\n      <nav id=\"nav\">\n        <NavLink activeClassName=\"active\" to=\"/about\">About\n        </NavLink>\n        <NavLink activeClassName=\"active\" to=\"/videos\">Videos\n        </NavLink>\n        <NavLink activeClassName=\"active\" to=\"/channels\">Channels\n        </NavLink>\n        <NavLink exact activeClassName=\"active\" to=\"/\">Home\n        </NavLink>\n        {this.state.auth && this.state.data  ? (\n           <span>\n             {this.state.data.role &&\n                <NavLink activeClassName=\"active\" to=\"/users\">Users\n                </NavLink>\n             }\n           <NavLink activeClassName=\"active\" onClick={this.handleClick} to=\"/logout\">Logout\n              </NavLink>\n              <div className=\"user\">\n                <img src={this.state.data.avaUrl} alt=\"User\" />\n                <NavLink activeClassName=\"active\" to=\"/profile\">{this.state.data.login}\n                </NavLink>\n              </div>\n         </span>\n        ) : (\n          <span>\n            <NavLink activeClassName=\"active\" to=\"/login\">Login\n              </NavLink>\n              <NavLink activeClassName=\"active\" to=\"/register\">Signin\n              </NavLink>\n          </span>\n        )}\n        <img src=\"https://res.cloudinary.com/hlrzutjus/image/upload/v1576349810/logo_anwozf.png\" alt=\"Logo\"></img>\n        <i>AndrewsBestsite</i>\n      </nav>\n    );\n  }\n}\nexport default withRouter(Header);"]},"metadata":{},"sourceType":"module"}