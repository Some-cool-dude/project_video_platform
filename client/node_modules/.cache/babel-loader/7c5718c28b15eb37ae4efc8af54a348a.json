{"ast":null,"code":"var _jsxFileName = \"/home/andrew/webprogbase2/client/src/Register.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport './css/register.css';\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: false,\n      message: '',\n      validate: false,\n      letter: \"invalid\",\n      length: \"invalid\",\n      capital: \"invalid\",\n      number: \"invalid\",\n      display: false\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleFocus = this.handleFocus.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n    this.handleKeyUp = this.handleKeyUp.bind(this);\n    this.username = React.createRef();\n    this.password = React.createRef();\n    this.repeat = React.createRef();\n    this.fullname = React.createRef();\n    this.lowerCaseLetters = /[a-z]/g;\n    this.upperCaseLetters = /[A-Z]/g;\n    this.numbers = /[0-9]/g;\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    let length = this.username.current.value.length + this.password.current.value.length + this.repeat.current.value.length + this.fullname.current.value.length;\n\n    if (this.username.current.value === '') {\n      this.setState({\n        error: true,\n        message: \"please fill username\"\n      });\n      event.target.reset();\n    } else if (this.password.current.value === '') {\n      this.setState({\n        error: true,\n        message: \"please fill password\"\n      });\n      event.target.reset();\n    } else if (this.repeat.current.value === '') {\n      this.setState({\n        error: true,\n        message: \"please fill repeat password\"\n      });\n      event.target.reset();\n    } else if (this.fullname.current.value === '') {\n      this.setState({\n        error: true,\n        message: \"please fill fullname\"\n      });\n      event.target.reset();\n    } else if (length > 200) {\n      this.setState({\n        error: true,\n        message: \"too long\"\n      });\n      event.target.reset();\n    } else if (this.state.letter === \"invalid\" || this.state.lenght === \"invalid\" || this.state.capital === \"invalid\" || this.state.number === \"invalid\") {\n      this.setState({\n        error: true,\n        message: \"please obey the rules\"\n      });\n      event.target.reset();\n    } else {\n      event.persist();\n      axios.post('/api/v1/register', {\n        username: this.username.current.value,\n        password: this.password.current.value,\n        repeat: this.repeat.current.value,\n        fullname: this.fullname.current.value\n      }).then(res => {\n        localStorage.setItem('jwt', res.data.token);\n        this.props.eventEmitter.emit(\"auth\", res.data.token);\n        this.props.history.push('/');\n      }).catch(err => {\n        if (err.response) {\n          if (err.response.data.message) {\n            this.setState({\n              error: true,\n              message: err.response.data.message\n            });\n            event.target.reset();\n          }\n        }\n\n        console.error(err.message);\n      });\n    }\n  }\n\n  handleFocus() {\n    this.setState({\n      validate: true\n    });\n  }\n\n  handleBlur() {\n    this.setState({\n      validate: false\n    });\n  }\n\n  handleKeyUp() {\n    if (this.password.current.value.match(this.lowerCaseLetters)) {\n      this.setState({\n        letter: \"valid\"\n      });\n    } else {\n      this.setState({\n        letter: \"invalid\"\n      });\n    }\n\n    if (this.password.current.value.match(this.upperCaseLetters)) {\n      this.setState({\n        capital: \"valid\"\n      });\n    } else {\n      this.setState({\n        capital: \"invalid\"\n      });\n    }\n\n    if (this.password.current.value.match(this.numbers)) {\n      this.setState({\n        number: \"valid\"\n      });\n    } else {\n      this.setState({\n        number: \"invalid\"\n      });\n    }\n\n    if (this.password.current.value.length >= 8) {\n      this.setState({\n        length: \"valid\"\n      });\n    } else {\n      this.setState({\n        length: \"invalid\"\n      });\n    }\n  }\n\n  componentDidMount() {\n    let nav = document.getElementById('nav');\n    let footer = document.getElementById('footer');\n    nav.style.display = \"none\";\n    footer.style.display = \"none\";\n  }\n\n  componentWillUnmount() {\n    let nav = document.getElementById('nav');\n    let footer = document.getElementById('footer');\n    nav.style.display = \"block\";\n    footer.style.display = \"block\";\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"Register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      action: \"/api/v1/register\",\n      method: \"POST\",\n      id: \"form\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Register\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Please fill in this form to create an account.\"), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), this.state.error && React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      id: \"alert\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, this.state.message), React.createElement(\"label\", {\n      htmlFor: \"fullname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"Fullname\")), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"fullname\",\n      placeholder: \"Enter fullname\",\n      name: \"fullname\",\n      maxLength: \"50\",\n      ref: this.fullname,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"Username\")), React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Enter username\",\n      name: \"username\",\n      maxLength: \"50\",\n      ref: this.username,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"psw\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"Password\")), React.createElement(\"input\", {\n      type: \"password\",\n      placeholder: \"Enter Password\",\n      name: \"password\",\n      maxLength: \"50\",\n      onKeyUp: this.handleKeyUp,\n      onBlur: this.handleBlur,\n      onFocus: this.handleFocus,\n      ref: this.password,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), this.state.validate && React.createElement(\"div\", {\n      className: \"container\",\n      id: \"message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      id: \"letter\",\n      className: this.state.letter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"A \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"lowercase\"), \" letter\"), React.createElement(\"p\", {\n      id: \"capital\",\n      className: this.state.capital,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"A \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"capital (uppercase)\"), \" letter\"), React.createElement(\"p\", {\n      id: \"number\",\n      className: this.state.number,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"A \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"number\")), React.createElement(\"p\", {\n      id: \"length\",\n      className: this.state.length,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"Minimum \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"8 characters\"))), React.createElement(\"label\", {\n      htmlFor: \"psw-repeat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Repeat Password\")), React.createElement(\"input\", {\n      type: \"password\",\n      placeholder: \"Repeat Password\",\n      name: \"repeat\",\n      maxLength: \"50\",\n      ref: this.repeat,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"registerbtn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Register\")), React.createElement(\"div\", {\n      className: \"container signin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \"Already have an account? \", React.createElement(\"a\", {\n      href: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \"Log in\"), \".\"))));\n  }\n\n}\n\nexport default Register;","map":{"version":3,"sources":["/home/andrew/webprogbase2/client/src/Register.js"],"names":["React","axios","Register","Component","constructor","props","state","error","message","validate","letter","length","capital","number","display","handleSubmit","bind","handleFocus","handleBlur","handleKeyUp","username","createRef","password","repeat","fullname","lowerCaseLetters","upperCaseLetters","numbers","event","preventDefault","current","value","setState","target","reset","lenght","persist","post","then","res","localStorage","setItem","data","token","eventEmitter","emit","history","push","catch","err","response","console","match","componentDidMount","nav","document","getElementById","footer","style","componentWillUnmount","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,oBAAP;;AAEA,MAAMC,QAAN,SAAuBF,KAAK,CAACG,SAA7B,CAAuC;AACnCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,KAAK,EAAE,KADE;AAETC,MAAAA,OAAO,EAAE,EAFA;AAGTC,MAAAA,QAAQ,EAAE,KAHD;AAITC,MAAAA,MAAM,EAAE,SAJC;AAKTC,MAAAA,MAAM,EAAE,SALC;AAMTC,MAAAA,OAAO,EAAE,SANA;AAOTC,MAAAA,MAAM,EAAE,SAPC;AAQTC,MAAAA,OAAO,EAAE;AARA,KAAb;AAUA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKE,UAAL,GAAkB,KAAKA,UAAL,CAAgBF,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKG,WAAL,GAAmB,KAAKA,WAAL,CAAiBH,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKI,QAAL,GAAgBpB,KAAK,CAACqB,SAAN,EAAhB;AACA,SAAKC,QAAL,GAAgBtB,KAAK,CAACqB,SAAN,EAAhB;AACA,SAAKE,MAAL,GAAcvB,KAAK,CAACqB,SAAN,EAAd;AACA,SAAKG,QAAL,GAAgBxB,KAAK,CAACqB,SAAN,EAAhB;AACA,SAAKI,gBAAL,GAAwB,QAAxB;AACA,SAAKC,gBAAL,GAAwB,QAAxB;AACA,SAAKC,OAAL,GAAe,QAAf;AACH;;AAEDZ,EAAAA,YAAY,CAACa,KAAD,EAAQ;AAChBA,IAAAA,KAAK,CAACC,cAAN;AACA,QAAIlB,MAAM,GAAG,KAAKS,QAAL,CAAcU,OAAd,CAAsBC,KAAtB,CAA4BpB,MAA5B,GAAqC,KAAKW,QAAL,CAAcQ,OAAd,CAAsBC,KAAtB,CAA4BpB,MAAjE,GAA0E,KAAKY,MAAL,CAAYO,OAAZ,CAAoBC,KAApB,CAA0BpB,MAApG,GAA6G,KAAKa,QAAL,CAAcM,OAAd,CAAsBC,KAAtB,CAA4BpB,MAAtJ;;AACA,QAAG,KAAKS,QAAL,CAAcU,OAAd,CAAsBC,KAAtB,KAAgC,EAAnC,EAAuC;AACnC,WAAKC,QAAL,CAAc;AAACzB,QAAAA,KAAK,EAAE,IAAR;AAAcC,QAAAA,OAAO,EAAE;AAAvB,OAAd;AACAoB,MAAAA,KAAK,CAACK,MAAN,CAAaC,KAAb;AACH,KAHD,MAIK,IAAG,KAAKZ,QAAL,CAAcQ,OAAd,CAAsBC,KAAtB,KAAgC,EAAnC,EAAuC;AACxC,WAAKC,QAAL,CAAc;AAACzB,QAAAA,KAAK,EAAE,IAAR;AAAcC,QAAAA,OAAO,EAAE;AAAvB,OAAd;AACAoB,MAAAA,KAAK,CAACK,MAAN,CAAaC,KAAb;AACH,KAHI,MAIA,IAAG,KAAKX,MAAL,CAAYO,OAAZ,CAAoBC,KAApB,KAA8B,EAAjC,EAAqC;AACtC,WAAKC,QAAL,CAAc;AAACzB,QAAAA,KAAK,EAAE,IAAR;AAAcC,QAAAA,OAAO,EAAE;AAAvB,OAAd;AACAoB,MAAAA,KAAK,CAACK,MAAN,CAAaC,KAAb;AACH,KAHI,MAIA,IAAG,KAAKV,QAAL,CAAcM,OAAd,CAAsBC,KAAtB,KAAgC,EAAnC,EAAuC;AACxC,WAAKC,QAAL,CAAc;AAACzB,QAAAA,KAAK,EAAE,IAAR;AAAcC,QAAAA,OAAO,EAAE;AAAvB,OAAd;AACAoB,MAAAA,KAAK,CAACK,MAAN,CAAaC,KAAb;AACH,KAHI,MAIA,IAAGvB,MAAM,GAAG,GAAZ,EAAiB;AACpB,WAAKqB,QAAL,CAAc;AAACzB,QAAAA,KAAK,EAAE,IAAR;AAAcC,QAAAA,OAAO,EAAE;AAAvB,OAAd;AACAoB,MAAAA,KAAK,CAACK,MAAN,CAAaC,KAAb;AACD,KAHI,MAIA,IAAG,KAAK5B,KAAL,CAAWI,MAAX,KAAsB,SAAtB,IAAmC,KAAKJ,KAAL,CAAW6B,MAAX,KAAsB,SAAzD,IAAsE,KAAK7B,KAAL,CAAWM,OAAX,KAAuB,SAA7F,IAA0G,KAAKN,KAAL,CAAWO,MAAX,KAAsB,SAAnI,EAA8I;AACjJ,WAAKmB,QAAL,CAAc;AAACzB,QAAAA,KAAK,EAAE,IAAR;AAAcC,QAAAA,OAAO,EAAE;AAAvB,OAAd;AACEoB,MAAAA,KAAK,CAACK,MAAN,CAAaC,KAAb;AACH,KAHI,MAIA;AACHN,MAAAA,KAAK,CAACQ,OAAN;AACEnC,MAAAA,KAAK,CAACoC,IAAN,CAAW,kBAAX,EAA+B;AAACjB,QAAAA,QAAQ,EAAE,KAAKA,QAAL,CAAcU,OAAd,CAAsBC,KAAjC;AACCT,QAAAA,QAAQ,EAAE,KAAKA,QAAL,CAAcQ,OAAd,CAAsBC,KADjC;AAECR,QAAAA,MAAM,EAAE,KAAKA,MAAL,CAAYO,OAAZ,CAAoBC,KAF7B;AAGCP,QAAAA,QAAQ,EAAE,KAAKA,QAAL,CAAcM,OAAd,CAAsBC;AAHjC,OAA/B,EAICO,IAJD,CAIMC,GAAG,IAAI;AACXC,QAAAA,YAAY,CAACC,OAAb,CAAqB,KAArB,EAA4BF,GAAG,CAACG,IAAJ,CAASC,KAArC;AACA,aAAKtC,KAAL,CAAWuC,YAAX,CAAwBC,IAAxB,CAA6B,MAA7B,EAAqCN,GAAG,CAACG,IAAJ,CAASC,KAA9C;AACA,aAAKtC,KAAL,CAAWyC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD,OARD,EASCC,KATD,CASOC,GAAG,IAAI;AACZ,YAAGA,GAAG,CAACC,QAAP,EAAiB;AACf,cAAGD,GAAG,CAACC,QAAJ,CAAaR,IAAb,CAAkBlC,OAArB,EAA8B;AAC5B,iBAAKwB,QAAL,CAAc;AAACzB,cAAAA,KAAK,EAAE,IAAR;AAAcC,cAAAA,OAAO,EAAEyC,GAAG,CAACC,QAAJ,CAAaR,IAAb,CAAkBlC;AAAzC,aAAd;AACAoB,YAAAA,KAAK,CAACK,MAAN,CAAaC,KAAb;AACD;AACF;;AACDiB,QAAAA,OAAO,CAAC5C,KAAR,CAAc0C,GAAG,CAACzC,OAAlB;AACD,OAjBD;AAkBH;AACJ;;AAEDS,EAAAA,WAAW,GAAG;AACZ,SAAKe,QAAL,CAAc;AAACvB,MAAAA,QAAQ,EAAE;AAAX,KAAd;AACD;;AAEDS,EAAAA,UAAU,GAAG;AACX,SAAKc,QAAL,CAAc;AAACvB,MAAAA,QAAQ,EAAE;AAAX,KAAd;AACD;;AAEDU,EAAAA,WAAW,GAAG;AACZ,QAAG,KAAKG,QAAL,CAAcQ,OAAd,CAAsBC,KAAtB,CAA4BqB,KAA5B,CAAkC,KAAK3B,gBAAvC,CAAH,EAA6D;AAC3D,WAAKO,QAAL,CAAc;AAACtB,QAAAA,MAAM,EAAE;AAAT,OAAd;AACD,KAFD,MAEO;AACL,WAAKsB,QAAL,CAAc;AAACtB,QAAAA,MAAM,EAAE;AAAT,OAAd;AACD;;AACD,QAAG,KAAKY,QAAL,CAAcQ,OAAd,CAAsBC,KAAtB,CAA4BqB,KAA5B,CAAkC,KAAK1B,gBAAvC,CAAH,EAA6D;AAC3D,WAAKM,QAAL,CAAc;AAACpB,QAAAA,OAAO,EAAE;AAAV,OAAd;AACD,KAFD,MAEO;AACL,WAAKoB,QAAL,CAAc;AAACpB,QAAAA,OAAO,EAAE;AAAV,OAAd;AACD;;AAED,QAAG,KAAKU,QAAL,CAAcQ,OAAd,CAAsBC,KAAtB,CAA4BqB,KAA5B,CAAkC,KAAKzB,OAAvC,CAAH,EAAoD;AAClD,WAAKK,QAAL,CAAc;AAACnB,QAAAA,MAAM,EAAE;AAAT,OAAd;AACD,KAFD,MAEO;AACL,WAAKmB,QAAL,CAAc;AAACnB,QAAAA,MAAM,EAAE;AAAT,OAAd;AACD;;AAED,QAAG,KAAKS,QAAL,CAAcQ,OAAd,CAAsBC,KAAtB,CAA4BpB,MAA5B,IAAsC,CAAzC,EAA4C;AAC1C,WAAKqB,QAAL,CAAc;AAACrB,QAAAA,MAAM,EAAE;AAAT,OAAd;AACD,KAFD,MAEO;AACL,WAAKqB,QAAL,CAAc;AAACrB,QAAAA,MAAM,EAAE;AAAT,OAAd;AACD;AACF;;AAED0C,EAAAA,iBAAiB,GAAG;AAClB,QAAIC,GAAG,GAAGC,QAAQ,CAACC,cAAT,CAAwB,KAAxB,CAAV;AACA,QAAIC,MAAM,GAAGF,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAb;AACAF,IAAAA,GAAG,CAACI,KAAJ,CAAU5C,OAAV,GAAoB,MAApB;AACA2C,IAAAA,MAAM,CAACC,KAAP,CAAa5C,OAAb,GAAuB,MAAvB;AACD;;AAED6C,EAAAA,oBAAoB,GAAG;AACrB,QAAIL,GAAG,GAAGC,QAAQ,CAACC,cAAT,CAAwB,KAAxB,CAAV;AACA,QAAIC,MAAM,GAAGF,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAb;AACAF,IAAAA,GAAG,CAACI,KAAJ,CAAU5C,OAAV,GAAoB,OAApB;AACA2C,IAAAA,MAAM,CAACC,KAAP,CAAa5C,OAAb,GAAuB,OAAvB;AACD;;AAEH8C,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAM,MAAA,MAAM,EAAC,kBAAb;AAAgC,MAAA,MAAM,EAAC,MAAvC;AAA8C,MAAA,EAAE,EAAC,MAAjD;AAAwD,MAAA,QAAQ,EAAE,KAAK7C,YAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wDAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,EAIG,KAAKT,KAAL,CAAWC,KAAX,IACC;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAoC,MAAA,EAAE,EAAC,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAgD,KAAKD,KAAL,CAAWE,OAA3D,CALJ,EAOE;AAAO,MAAA,OAAO,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAA1B,CAPF,EAQE;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,EAAE,EAAC,UAAtB;AAAiC,MAAA,WAAW,EAAC,gBAA7C;AAA8D,MAAA,IAAI,EAAC,UAAnE;AAA8E,MAAA,SAAS,EAAC,IAAxF;AAA6F,MAAA,GAAG,EAAE,KAAKgB,QAAvG;AAAiH,MAAA,QAAQ,MAAzH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARF,EAUE;AAAO,MAAA,OAAO,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAA1B,CAVF,EAWE;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,WAAW,EAAC,gBAA/B;AAAgD,MAAA,IAAI,EAAC,UAArD;AAAgE,MAAA,SAAS,EAAC,IAA1E;AAA+E,MAAA,GAAG,EAAE,KAAKJ,QAAzF;AAAmG,MAAA,QAAQ,MAA3G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAXF,EAaE;AAAO,MAAA,OAAO,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAArB,CAbF,EAcE;AAAO,MAAA,IAAI,EAAC,UAAZ;AAAuB,MAAA,WAAW,EAAC,gBAAnC;AAAoD,MAAA,IAAI,EAAC,UAAzD;AAAoE,MAAA,SAAS,EAAC,IAA9E;AAAmF,MAAA,OAAO,EAAE,KAAKD,WAAjG;AAA8G,MAAA,MAAM,EAAE,KAAKD,UAA3H;AAAuI,MAAA,OAAO,EAAE,KAAKD,WAArJ;AAAkK,MAAA,GAAG,EAAE,KAAKK,QAA5K;AAAsL,MAAA,QAAQ,MAA9L;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAdF,EAgBG,KAAKhB,KAAL,CAAWG,QAAX,IACC;AAAK,MAAA,SAAS,EAAC,WAAf;AAA2B,MAAA,EAAE,EAAC,SAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,EAAE,EAAC,QAAN;AAAe,MAAA,SAAS,EAAE,KAAKH,KAAL,CAAWI,MAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA+C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAA/C,YADF,EAEE;AAAG,MAAA,EAAE,EAAC,SAAN;AAAgB,MAAA,SAAS,EAAE,KAAKJ,KAAL,CAAWM,OAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAiD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAjD,YAFF,EAGE;AAAG,MAAA,EAAE,EAAC,QAAN;AAAe,MAAA,SAAS,EAAE,KAAKN,KAAL,CAAWO,MAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA+C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAA/C,CAHF,EAIE;AAAG,MAAA,EAAE,EAAC,QAAN;AAAe,MAAA,SAAS,EAAE,KAAKP,KAAL,CAAWK,MAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAqD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAArD,CAJF,CAjBJ,EAyBE;AAAO,MAAA,OAAO,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAA5B,CAzBF,EA0BE;AAAO,MAAA,IAAI,EAAC,UAAZ;AAAuB,MAAA,WAAW,EAAC,iBAAnC;AAAqD,MAAA,IAAI,EAAC,QAA1D;AAAmE,MAAA,SAAS,EAAC,IAA7E;AAAkF,MAAA,GAAG,EAAE,KAAKY,MAA5F;AAAoG,MAAA,QAAQ,MAA5G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA1BF,EA4BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA5BF,EA6BE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,SAAS,EAAC,aAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBA7BF,CADA,EAgCA;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAA4B;AAAG,MAAA,IAAI,EAAC,QAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAA5B,MADF,CAhCA,CADF,CADF;AAwCD;;AApKoC;;AAuKvC,eAAerB,QAAf","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport './css/register.css'\n\nclass Register extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: false,\n            message: '',\n            validate: false,\n            letter: \"invalid\",\n            length: \"invalid\",\n            capital: \"invalid\",\n            number: \"invalid\",\n            display: false\n        }\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleFocus = this.handleFocus.bind(this);\n        this.handleBlur = this.handleBlur.bind(this);\n        this.handleKeyUp = this.handleKeyUp.bind(this);\n        this.username = React.createRef();\n        this.password = React.createRef();\n        this.repeat = React.createRef();\n        this.fullname = React.createRef();\n        this.lowerCaseLetters = /[a-z]/g;\n        this.upperCaseLetters = /[A-Z]/g;\n        this.numbers = /[0-9]/g;\n    }\n\n    handleSubmit(event) {\n        event.preventDefault();\n        let length = this.username.current.value.length + this.password.current.value.length + this.repeat.current.value.length + this.fullname.current.value.length;\n        if(this.username.current.value === '') {\n            this.setState({error: true, message: \"please fill username\"});\n            event.target.reset();\n        }\n        else if(this.password.current.value === '') {\n            this.setState({error: true, message: \"please fill password\"});\n            event.target.reset();\n        }\n        else if(this.repeat.current.value === '') {\n            this.setState({error: true, message: \"please fill repeat password\"});\n            event.target.reset();\n        }\n        else if(this.fullname.current.value === '') {\n            this.setState({error: true, message: \"please fill fullname\"});\n            event.target.reset();\n        }\n        else if(length > 200) {\n          this.setState({error: true, message: \"too long\"});\n          event.target.reset();\n        }\n        else if(this.state.letter === \"invalid\" || this.state.lenght === \"invalid\" || this.state.capital === \"invalid\" || this.state.number === \"invalid\") {\n          this.setState({error: true, message: \"please obey the rules\"});\n            event.target.reset();\n        }\n        else {\n          event.persist();\n            axios.post('/api/v1/register', {username: this.username.current.value,\n                                            password: this.password.current.value,\n                                            repeat: this.repeat.current.value,\n                                            fullname: this.fullname.current.value})\n            .then(res => {\n              localStorage.setItem('jwt', res.data.token);\n              this.props.eventEmitter.emit(\"auth\", res.data.token);\n              this.props.history.push('/');\n            })\n            .catch(err => {\n              if(err.response) {\n                if(err.response.data.message) {\n                  this.setState({error: true, message: err.response.data.message});\n                  event.target.reset();\n                }\n              }\n              console.error(err.message);\n            });\n        }\n    }\n\n    handleFocus() {\n      this.setState({validate: true});\n    }\n\n    handleBlur() {\n      this.setState({validate: false});\n    }\n\n    handleKeyUp() {\n      if(this.password.current.value.match(this.lowerCaseLetters)) {\n        this.setState({letter: \"valid\"});\n      } else {\n        this.setState({letter: \"invalid\"});\n      }\n      if(this.password.current.value.match(this.upperCaseLetters)) {\n        this.setState({capital: \"valid\"});\n      } else {\n        this.setState({capital: \"invalid\"});\n      }\n      \n      if(this.password.current.value.match(this.numbers)) {\n        this.setState({number: \"valid\"});\n      } else {\n        this.setState({number: \"invalid\"});\n      }\n      \n      if(this.password.current.value.length >= 8) {\n        this.setState({length: \"valid\"});\n      } else {\n        this.setState({length: \"invalid\"});\n      }\n    }\n\n    componentDidMount() {\n      let nav = document.getElementById('nav');\n      let footer = document.getElementById('footer');\n      nav.style.display = \"none\";\n      footer.style.display = \"none\";\n    }\n\n    componentWillUnmount() {\n      let nav = document.getElementById('nav');\n      let footer = document.getElementById('footer');\n      nav.style.display = \"block\";\n      footer.style.display = \"block\";\n    }\n\n  render() {\n    return (\n      <div className=\"Register\">\n        <form action=\"/api/v1/register\" method=\"POST\" id=\"form\" onSubmit={this.handleSubmit}>\n        <div className=\"container\">\n        <h1>Register</h1>\n          <p>Please fill in this form to create an account.</p>\n          <hr />\n          {this.state.error && \n            <div className=\"alert alert-danger\" id=\"alert\">{this.state.message}</div>\n          }\n          <label htmlFor=\"fullname\"><b>Fullname</b></label>\n          <input type=\"text\" id=\"fullname\" placeholder=\"Enter fullname\" name=\"fullname\" maxLength=\"50\" ref={this.fullname} required />\n\n          <label htmlFor=\"username\"><b>Username</b></label>\n          <input type=\"text\" placeholder=\"Enter username\" name=\"username\" maxLength=\"50\" ref={this.username} required />\n      \n          <label htmlFor=\"psw\"><b>Password</b></label>\n          <input type=\"password\" placeholder=\"Enter Password\" name=\"password\" maxLength=\"50\" onKeyUp={this.handleKeyUp} onBlur={this.handleBlur} onFocus={this.handleFocus} ref={this.password} required />\n\n          {this.state.validate && \n            <div className=\"container\" id=\"message\">\n              <p id=\"letter\" className={this.state.letter}>A <b>lowercase</b> letter</p>\n              <p id=\"capital\" className={this.state.capital}>A <b>capital (uppercase)</b> letter</p>\n              <p id=\"number\" className={this.state.number}>A <b>number</b></p>\n              <p id=\"length\" className={this.state.length}>Minimum <b>8 characters</b></p>\n            </div>\n          }\n\n          <label htmlFor=\"psw-repeat\"><b>Repeat Password</b></label>\n          <input type=\"password\" placeholder=\"Repeat Password\" name=\"repeat\" maxLength=\"50\" ref={this.repeat} required />\n      \n          <hr />\n          <button type=\"submit\" className=\"registerbtn\">Register</button>\n        </div>\n        <div className=\"container signin\">\n          <p>Already have an account? <a href=\"/login\">Log in</a>.</p>\n        </div>\n      </form>\n      </div>\n    );\n  }\n}\n\nexport default Register"]},"metadata":{},"sourceType":"module"}