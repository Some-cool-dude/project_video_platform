{"ast":null,"code":"import _classCallCheck from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/andrew/webprogbase2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import axios from'axios';import'./css/users.css';var Users=/*#__PURE__*/function(_React$Component){_inherits(Users,_React$Component);function Users(props){var _this;_classCallCheck(this,Users);_this=_possibleConstructorReturn(this,_getPrototypeOf(Users).call(this,props));_this.state={search:'',length:7,pages:0,step:2,array:[],defaultArray:[],isActive:1,data:null};_this.handleWithPrevNext=_this.handleWithPrevNext.bind(_assertThisInitialized(_this));_this.handleWithClick=_this.handleWithClick.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(Users,[{key:\"update\",value:function update(page,array){var _this2=this;axios.get('/api/v1/users?page='+page+\"&search=\"+this.state.search,{headers:{Authorization:\"Bearer \".concat(this.props.auth)}}).then(function(res){_this2.setState({isActive:page,array:array,data:res.data});}).catch(console.error);}},{key:\"goToPage\",value:function goToPage(page){var array=[];if(page-this.state.step<=1){array=this.state.defaultArray.concat([\"next\",this.state.pages]);}else if(page+this.state.step>=this.state.pages){array=[1,\"prev\"];var pages=this.state.pages;for(var i=this.state.length;i>2;i--){array[i]=pages;pages--;}}else{array=[1,\"prev\",page-1,page,page+1,\"next\",this.state.pages];}this.update(page,array);}},{key:\"handleWithPrevNext\",value:function handleWithPrevNext(event){if(event.target.id===\"next\"){this.goToPage(this.state.isActive+2);}else if(event.target.id===\"prev\"){this.goToPage(this.state.isActive-2);}else{this.goToPage(parseInt(event.target.id));}}},{key:\"handleWithClick\",value:function handleWithClick(event){this.update(parseInt(event.target.id),this.state.defaultArray.concat([\"next\",this.state.pages]));}},{key:\"handleChange\",value:function handleChange(event){var _this3=this;event.persist();axios.get('/api/v1/users?search='+event.target.value,{headers:{Authorization:\"Bearer \".concat(this.props.auth)}}).then(function(res){_this3.setState({isActive:1,pages:res.data.pages,array:_this3.state.defaultArray.concat([\"next\",res.data.pages]),data:res.data,search:event.target.value});});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this4=this;axios.get('/api/v1/users',{headers:{Authorization:\"Bearer \".concat(this.props.auth)}}).then(function(res){var array=[];var count=1;for(var i=0;i<_this4.state.length-2;i++){array[i]=count;count++;}_this4.setState({pages:res.data.pages,array:array.concat([\"next\",res.data.pages]),defaultArray:array,data:res.data});}).catch(console.error);}},{key:\"render\",value:function render(){var _this5=this;if(!this.state.data)return null;var more=this.state.pages>this.state.length;var array=[];if(!more){for(var i=0;i<this.state.pages;i++){array[i]=i+1;}}return React.createElement(\"div\",{className:\"Users\"},React.createElement(\"div\",{className:\"content\"},React.createElement(\"input\",{type:\"text\",id:\"search\",placeholder:\"Search..\",onChange:this.handleChange}),React.createElement(\"p\",null,\" Find \",this.state.data.search,\" results\"),React.createElement(\"h1\",null,\"Users\")),React.createElement(\"div\",null,!this.state.data.items.length?React.createElement(\"p\",null,\"No such videos\"):React.createElement(\"table\",null,React.createElement(\"tbody\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Login\"),React.createElement(\"th\",null,\"Fullname\"),React.createElement(\"th\",null,\"Registered\")),this.state.data.items.map(function(item){return React.createElement(\"tr\",{key:item._id},React.createElement(\"td\",null,React.createElement(\"a\",{href:\"users/\"+item._id},item.login)),React.createElement(\"td\",null,React.createElement(\"a\",{href:\"users/\"+item._id},item.fullname)),React.createElement(\"td\",null,item.registeredAt));})))),React.createElement(\"div\",{className:\"center\"},React.createElement(\"div\",{className:\"pagination\"},more?React.createElement(\"span\",null,\" \",this.state.array.map(function(page){return React.createElement(\"button\",{key:page.toString(),id:page.toString(),className:_this5.state.isActive===page?'active':'',onClick:_this5.handleWithPrevNext},page);}),\" \"):React.createElement(\"span\",null,\" \",array.map(function(page){return React.createElement(\"button\",{key:page.toString(),id:page.toString(),className:_this5.state.isActive===page?'active':'',onClick:_this5.handleWithClick},page);}),\" \"))));}}]);return Users;}(React.Component);export default Users;","map":{"version":3,"sources":["/home/andrew/webprogbase2/client/src/Users.js"],"names":["React","axios","Users","props","state","search","length","pages","step","array","defaultArray","isActive","data","handleWithPrevNext","bind","handleWithClick","handleChange","page","get","headers","Authorization","auth","then","res","setState","catch","console","error","concat","i","update","event","target","id","goToPage","parseInt","persist","value","count","more","items","map","item","_id","login","fullname","registeredAt","toString","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport './css/users.css';\n\nclass Users extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n        search:'',\n        length: 7,\n        pages: 0,\n        step: 2,\n        array: [],\n        defaultArray: [],\n        isActive: 1,\n        data: null\n    }\n    this.handleWithPrevNext = this.handleWithPrevNext.bind(this);\n    this.handleWithClick = this.handleWithClick.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  update(page, array) {\n    axios.get('/api/v1/users?page=' + page + \"&search=\" + this.state.search, {headers:{Authorization: `Bearer ${this.props.auth}`}})\n    .then(res => {\n        this.setState({isActive: page, array: array, data: res.data});\n    })\n    .catch(console.error);\n  }\n\n  goToPage(page) {\n      let array = [];\n      if(page - this.state.step <= 1) {\n          array = this.state.defaultArray.concat([\"next\",this.state.pages]);\n      }\n      else if(page + this.state.step >= this.state.pages) {\n          array = [1, \"prev\"];\n          let pages = this.state.pages;\n          for(let i = this.state.length ; i > 2; i--) {\n            array[i] = pages;\n            pages--;\n          }\n      }\n      else {\n          array = [1,\"prev\",page-1,page,page+1,\"next\", this.state.pages];\n      }\n      this.update(page, array);\n  }\n\n  handleWithPrevNext(event) {\n    if(event.target.id === \"next\") {\n        this.goToPage(this.state.isActive + 2);\n    }\n    else if(event.target.id === \"prev\") {\n        this.goToPage(this.state.isActive - 2);\n    }\n    else {\n        this.goToPage(parseInt(event.target.id));\n    }\n  }\n\n  handleWithClick(event) {\n      this.update(parseInt(event.target.id), this.state.defaultArray.concat([\"next\", this.state.pages]));\n  }\n\n  handleChange(event) {\n    event.persist();\n    axios.get('/api/v1/users?search=' + event.target.value, {headers:{Authorization: `Bearer ${this.props.auth}`}})\n    .then(res => {\n        this.setState({isActive: 1, pages: res.data.pages, array: this.state.defaultArray.concat([\"next\", res.data.pages]), data: res.data, search: event.target.value});\n    })\n  }\n\n  componentDidMount() {\n    axios.get('/api/v1/users', {headers:{Authorization: `Bearer ${this.props.auth}`}})\n    .then(res => {\n      let array = [];\n      let count = 1;\n        for(let i = 0; i < this.state.length - 2; i++)\n        {\n          array[i] = count;\n          count++;\n        }\n        this.setState({pages: res.data.pages, array: array.concat([\"next\", res.data.pages]), defaultArray: array, data: res.data});\n    })\n    .catch(console.error);\n  }\n\n  render() {\n    if(!this.state.data) return null;\n      const more = this.state.pages > this.state.length;\n      let array = [];\n      if(!more) {\n        for(let i = 0; i < this.state.pages; i++) {\n          array[i] = i + 1;\n        }\n      }\n    return (\n        <div className=\"Users\">\n            <div className=\"content\">\n                <input type=\"text\" id=\"search\" placeholder=\"Search..\" onChange={this.handleChange}/>\n                <p> Find {this.state.data.search} results</p>\n                <h1>Users</h1>\n            </div>\n                <div>\n                  {!this.state.data.items.length \n                    ?(<p>No such videos</p>)\n                  :(<table>\n                    <tbody>\n                      <tr>\n                        <th>Login</th>\n                        <th>Fullname</th>\n                        <th>Registered</th>\n                      </tr>\n                    {this.state.data.items.map(item =>\n                        <tr key={item._id}>\n                            <td><a href={\"users/\" + item._id}>{item.login}</a></td>\n                            <td><a href={\"users/\" + item._id}>{item.fullname}</a></td>\n                            <td>{item.registeredAt}</td>\n                        </tr>\n                    )}\n                    </tbody>\n                    </table>)\n                  }      \n                </div>\n            <div className=\"center\">\n              <div className=\"pagination\">\n                {more \n                      ?(<span> {this.state.array.map(page => <button key={page.toString()} id={page.toString()} className={this.state.isActive === page ? 'active' : ''} onClick={this.handleWithPrevNext}>{page}</button>)} </span>)\n                      :(<span> {array.map(page => <button key={page.toString()} id={page.toString()} className={this.state.isActive === page ? 'active' : ''} onClick={this.handleWithClick}>{page}</button>)} </span>)\n                }\n              </div>\n            </div>\n        </div>\n    );\n\n  }\n\n}\n\nexport default Users;"]},"metadata":{},"sourceType":"module"}